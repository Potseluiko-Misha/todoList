{"ast":null,"code":"var _jsxFileName = \"D:\\\\todoList\\\\react-web-frontend\\\\src\\\\TodoList.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect, useContext } from 'react';\nimport { Navigate } from 'react-router-dom';\nimport { baseURL } from './utility.js';\nimport TodoItem from './TodoItem.js';\nimport TodoSearch from './TodoSearch.js';\nimport TodoSort from './TodoSort.js';\nimport { TokenContext, RefreshListContext } from './utility.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function TodoList() {\n  _s();\n  const [todos, setTodos] = useState([]);\n  const [search, setSearch] = useState('');\n  const [sort, setSort] = useState('0');\n  const [refresh, setRefresh] = useState(false);\n  const token = useContext(TokenContext);\n  function acceptSearch(searchWord) {\n    setSearch(searchWord);\n  }\n  function acceptSort(sortOrder) {\n    setSort(sortOrder);\n  }\n  function refreshList() {\n    setRefresh(!refresh);\n  }\n  useEffect(() => {\n    if (!token) return;\n    (async () => {\n      const params = new URLSearchParams();\n      if (search) params.append('search', search);\n      params.append('doneAtLast', sort);\n      const response = await fetch(`${baseURL}?${params}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      if (response.ok) setTodos((await response.json()).todos);else window.alert(response.status + ': ' + response.statusText);\n    })();\n  }, [token, search, sort, refresh]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [!token && /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 24\n    }, this), token && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(TodoSearch, {\n        search: search,\n        acceptSearch: acceptSearch\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(TodoSort, {\n        sort: sort,\n        acceptSort: acceptSort\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"heading\",\n        children: \"\\u0417\\u0430\\u043F\\u043B\\u0430\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u043D\\u044B\\u0435 \\u0434\\u0435\\u043B\\u0430\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(RefreshListContext.Provider, {\n        value: refreshList,\n        children: todos.map(item => /*#__PURE__*/_jsxDEV(TodoItem, {\n          item: item\n        }, item._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true);\n}\n_s(TodoList, \"RBuPCw6fSg+pWLptMXo/vZz6+NM=\");\n_c = TodoList;\nvar _c;\n$RefreshReg$(_c, \"TodoList\");","map":{"version":3,"names":["useState","useEffect","useContext","Navigate","baseURL","TodoItem","TodoSearch","TodoSort","TokenContext","RefreshListContext","jsxDEV","_jsxDEV","Fragment","_Fragment","TodoList","_s","todos","setTodos","search","setSearch","sort","setSort","refresh","setRefresh","token","acceptSearch","searchWord","acceptSort","sortOrder","refreshList","params","URLSearchParams","append","response","fetch","headers","Authorization","ok","json","window","alert","status","statusText","children","to","fileName","_jsxFileName","lineNumber","columnNumber","className","Provider","value","map","item","_id","_c","$RefreshReg$"],"sources":["D:/todoList/react-web-frontend/src/TodoList.js"],"sourcesContent":["import { useState, useEffect, useContext } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nimport { baseURL } from './utility.js';\r\nimport TodoItem from './TodoItem.js';\r\nimport TodoSearch from './TodoSearch.js';\r\nimport TodoSort from './TodoSort.js';\r\nimport { TokenContext, RefreshListContext } from './utility.js';\r\n\r\nexport default function TodoList() {\r\n    const [todos, setTodos] = useState([]);\r\n    const [search, setSearch] = useState('');\r\n    const [sort, setSort] = useState('0');\r\n    const [refresh, setRefresh] = useState(false);\r\n    const token = useContext(TokenContext);\r\n\r\n    function acceptSearch(searchWord) {\r\n        setSearch(searchWord);\r\n    }\r\n\r\n    function acceptSort(sortOrder) {\r\n        setSort(sortOrder);\r\n    }\r\n\r\n    function refreshList() {\r\n        setRefresh(!refresh);\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!token) return;\r\n        (async () => {\r\n            const params = new URLSearchParams();\r\n            if (search)\r\n                params.append('search', search);\r\n            params.append('doneAtLast', sort);\r\n            const response = await fetch(`${baseURL}?${params}`, {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            });\r\n            if (response.ok)\r\n                setTodos((await response.json()).todos);\r\n            else\r\n                window.alert(response.status + ': ' +\r\n                             response.statusText);\r\n        })();\r\n    }, [token, search, sort, refresh]);\r\n\r\n    return (\r\n        <>\r\n            {!token && <Navigate to=\"/login\" />}\r\n            {token &&\r\n                <>\r\n                    <TodoSearch search={search}\r\n                                acceptSearch={acceptSearch} />\r\n                    <TodoSort sort={sort} acceptSort={acceptSort} />\r\n                    <h1 className=\"heading\">Запланированные дела</h1>\r\n                    <RefreshListContext.Provider value={refreshList}>\r\n                        {todos.map((item) => (\r\n                            <TodoItem key={item._id} item={item} />\r\n                        ))}\r\n                    </RefreshListContext.Provider>\r\n                </>\r\n            }\r\n        </>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}